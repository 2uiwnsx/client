<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ex28_timer</title>
    </head>
    <body>
        <h1>타이머</h1>

        <form name="form">
            <fieldset>
                <legend>setTimeout</legend>

                <input type="text" name="txt1">
                <input type="button" name="btn1" value="버튼">
            </fieldset>
            <fieldset>
                <legend>setInterval</legend>

                <input type="text" name="txt2">
                <input type="button" name="btn2" value="버튼">
            </fieldset>
            <fieldset>
                <legend>조작</legend>

                <input type="text" name="txt3">
                <input type="button" name="btn3" value="시작">
                <input type="button" name="btn4" value="종료">
            </fieldset>
        </form>

        <hr>

        <img src="./../asset/images/catty01.png" name="cat">

        <script>
            var txt1 = document.form.txt1;
            var btn1 = document.form.btn1;
            var txt2 = document.form.txt2;
            var btn2 = document.form.btn2;
            var txt3 = document.form.txt3;
            var btn3 = document.form.btn3;
            var btn4 = document.form.btn4;

            function f1() {
                txt1.value = (new Date()).toLocaleTimeString();
            }

            function m1() {
                setTimeout(f1, 3000);
            }

            btn1.onclick = m1;

            function f2() {
                txt2.value = (new Date()).toLocaleTimeString();
            }

            function m2() {
                setInterval(f2, 1000);
            }

            btn2.onclick = m2;

            var n = 1;

            function f3() {
                txt3.value = n++;
            }

            var timer = 0;
            var timerList = [];

            function m3() {
                // if (timer == 0) {
                //     timer = setInterval(f3, 100);
                // }

                timer = setInterval(f3, 100);
                
                timerList.push(timer);
            }

            btn3.onclick = m3;

            function m4() {
                // clearInterval(timer);
                // timer = 0;
                
                // timer = timerList.pop();
                // clearInterval(timer);

                for (var i = 0; i < timerList.length; i++) {
                    clearInterval(timerList[i]);
                }
            }

            btn4.onclick = m4;

            var cat = document.images['cat'];

            var m = 1;

            function f5() {
                m++;

                if (m > 9) {
                    m = 1;
                }

                cat.src = './../asset/images/catty0' + m + '.png';
            }

            var cTimer = 0;

            function m5() {
                if (cTimer == 0) {
                    cTimer = setInterval(f5, 100);
                } else {
                    clearInterval(cTimer);
                    
                    cTimer = 0;
                }
            }

            cat.onclick = m5;
        </script>
    </body>
</html>